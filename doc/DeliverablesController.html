<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: DeliverablesController</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/controllers/deliverables_controller.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="ApplicationController.html">ApplicationController</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-create">#create</a>
    
    <li><a href="#method-i-create_custom_deliverable_type">#create_custom_deliverable_type</a>
    
    <li><a href="#method-i-destroy">#destroy</a>
    
    <li><a href="#method-i-edit">#edit</a>
    
    <li><a href="#method-i-get_historical_data">#get_historical_data</a>
    
    <li><a href="#method-i-get_unit_of_measure">#get_unit_of_measure</a>
    
    <li><a href="#method-i-new">#new</a>
    
    <li><a href="#method-i-show">#show</a>
    
    <li><a href="#method-i-show_phase_deliverables">#show_phase_deliverables</a>
    
    <li><a href="#method-i-update">#update</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./Design/ClassDiagram_txt.html">ClassDiagram</a>
  
    <li class="file"><a href="./Design/ModelAssociations_txt.html">ModelAssociations</a>
  
    <li class="file"><a href="./Design/ScreenFlow_txt.html">ScreenFlow</a>
  
    <li class="file"><a href="./Design/ToolsAndTechniques_txt.html">ToolsAndTechniques</a>
  
    <li class="file"><a href="./Gemfile.html">Gemfile</a>
  
    <li class="file"><a href="./Rakefile.html">Rakefile</a>
  
    <li class="file"><a href="./doc/README_FOR_APP.html">README_FOR_APP</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./Jasmine.html">Jasmine</a>
  
    <li><a href="./Jasmine/Config.html">Jasmine::Config</a>
  
    <li><a href="./Jasmine/SpecBuilder.html">Jasmine::SpecBuilder</a>
  
    <li><a href="./PET.html">PET</a>
  
    <li><a href="./PET/Application.html">PET::Application</a>
  
    <li><a href="./Ability.html">Ability</a>
  
    <li><a href="./AddComplexityIdToDeliverable.html">AddComplexityIdToDeliverable</a>
  
    <li><a href="./AddLifecycleIdToProject.html">AddLifecycleIdToProject</a>
  
    <li><a href="./AddProjectDeliverableTypeIdToDeliverable.html">AddProjectDeliverableTypeIdToDeliverable</a>
  
    <li><a href="./AddProjectDeliverableTypeTypeToDeliverables.html">AddProjectDeliverableTypeTypeToDeliverables</a>
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./ChangePolymorphicDetailsInDeliverables.html">ChangePolymorphicDetailsInDeliverables</a>
  
    <li><a href="./Complexity.html">Complexity</a>
  
    <li><a href="./CreateComplexities.html">CreateComplexities</a>
  
    <li><a href="./CreateCustomDeliverableTypes.html">CreateCustomDeliverableTypes</a>
  
    <li><a href="./CreateDeliverableTypes.html">CreateDeliverableTypes</a>
  
    <li><a href="./CreateDeliverables.html">CreateDeliverables</a>
  
    <li><a href="./CreateEffortLogs.html">CreateEffortLogs</a>
  
    <li><a href="./CreateLifecyclePhases.html">CreateLifecyclePhases</a>
  
    <li><a href="./CreateLifecycles.html">CreateLifecycles</a>
  
    <li><a href="./CreateProjectPhases.html">CreateProjectPhases</a>
  
    <li><a href="./CreateProjects.html">CreateProjects</a>
  
    <li><a href="./CreateRoles.html">CreateRoles</a>
  
    <li><a href="./CreateStockDeliverableTypes.html">CreateStockDeliverableTypes</a>
  
    <li><a href="./CreateUnitOfMeasures.html">CreateUnitOfMeasures</a>
  
    <li><a href="./CustomDeliverableType.html">CustomDeliverableType</a>
  
    <li><a href="./Deliverable.html">Deliverable</a>
  
    <li><a href="./DeliverableType.html">DeliverableType</a>
  
    <li><a href="./DeliverablesController.html">DeliverablesController</a>
  
    <li><a href="./DeliverablesHelper.html">DeliverablesHelper</a>
  
    <li><a href="./DeviseCreateUsers.html">DeviseCreateUsers</a>
  
    <li><a href="./EffortLog.html">EffortLog</a>
  
    <li><a href="./EffortLogsController.html">EffortLogsController</a>
  
    <li><a href="./EffortLogsHelper.html">EffortLogsHelper</a>
  
    <li><a href="./Lifecycle.html">Lifecycle</a>
  
    <li><a href="./LifecyclePhase.html">LifecyclePhase</a>
  
    <li><a href="./LifecyclePhasesController.html">LifecyclePhasesController</a>
  
    <li><a href="./LifecyclePhasesHelper.html">LifecyclePhasesHelper</a>
  
    <li><a href="./LifecyclesController.html">LifecyclesController</a>
  
    <li><a href="./LifecyclesHelper.html">LifecyclesHelper</a>
  
    <li><a href="./Object.html">Object</a>
  
    <li><a href="./PagesController.html">PagesController</a>
  
    <li><a href="./PagesHelper.html">PagesHelper</a>
  
    <li><a href="./Project.html">Project</a>
  
    <li><a href="./ProjectPhase.html">ProjectPhase</a>
  
    <li><a href="./ProjectPhasesController.html">ProjectPhasesController</a>
  
    <li><a href="./ProjectPhasesHelper.html">ProjectPhasesHelper</a>
  
    <li><a href="./ProjectsController.html">ProjectsController</a>
  
    <li><a href="./ProjectsHelper.html">ProjectsHelper</a>
  
    <li><a href="./Role.html">Role</a>
  
    <li><a href="./StockDeliverableType.html">StockDeliverableType</a>
  
    <li><a href="./UnitOfMeasure.html">UnitOfMeasure</a>
  
    <li><a href="./User.html">User</a>
  
    <li><a href="./UsersController.html">UsersController</a>
  
    <li><a href="./UsersHaveAndBelongToManyRoles.html">UsersHaveAndBelongToManyRoles</a>
  
    <li><a href="./UsersHelper.html">UsersHelper</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class DeliverablesController</h1>

  <div id="description" class="description">
    
<p>This is the controller for our deliverable resource. It sets up instance
variables that will be used in the views. This controller provides 
functionality for creating both stock and custom deliverables. It also
provides functions used in deliverable-related AJAX calls that return JSON
strings.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-create" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>POST /deliverables POST /deliverables.xml We are using polymorphic
associations to create this deliverable created through @assignable</p>
          

          
          <div class="method-source-code" id="create-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
  <span class="ruby-ivar">@assignable</span> = <span class="ruby-identifier">find_assignable</span>

  <span class="ruby-ivar">@deliverable</span> = <span class="ruby-ivar">@assignable</span>.<span class="ruby-identifier">deliverables</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:deliverable</span>][<span class="ruby-value">:name</span>],
                                                <span class="ruby-value">:description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:deliverable</span>][<span class="ruby-value">:description</span>],
                                                <span class="ruby-value">:estimated_effort</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:deliverable</span>][<span class="ruby-value">:estimated_effort</span>],
                                                <span class="ruby-value">:estimated_size</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:deliverable</span>][<span class="ruby-value">:estimated_size</span>],
                                                <span class="ruby-value">:estimated_production_rate</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:deliverable</span>][<span class="ruby-value">:estimated_production_rate</span>],
                                                <span class="ruby-value">:complexity_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:deliverable</span>][<span class="ruby-value">:complexity_id</span>])


  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@deliverable</span>.<span class="ruby-identifier">save</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-ivar">@deliverable</span>, <span class="ruby-value">:notice</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Deliverable was successfully created.'</span>) }
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@deliverable</span>, <span class="ruby-value">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:created</span>, <span class="ruby-value">:location</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@deliverable</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@assignable</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@project_phase_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:deliverable</span>][<span class="ruby-value">:project_phase_id</span>]

      <span class="ruby-identifier">gather_collections</span>

      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;new&quot;</span> }
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@deliverable</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-value">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:unprocessable_entity</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- create-source -->
          
        </div>

        

        
      </div><!-- create-method -->

    
      <div id="method-i-create_custom_deliverable_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_custom_deliverable_type</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Creates a <a href="CustomDeliverableType.html">CustomDeliverableType</a>
Associates a <a href="ProjectPhase.html">ProjectPhase</a> and <a
href="UnitOfMeasure.html">UnitOfMeasure</a> to the <a
href="CustomDeliverableType.html">CustomDeliverableType</a></p>
          

          
          <div class="method-source-code" id="create_custom_deliverable_type-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_custom_deliverable_type</span>
  <span class="ruby-comment"># we get the posted variables</span>
  <span class="ruby-comment"># save them to the database</span>
  <span class="ruby-identifier">custom_deliverable_type</span> = <span class="ruby-constant">CustomDeliverableType</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:name</span>],
                                                      <span class="ruby-value">:project_phase_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:project_phase_id</span>],
                                                      <span class="ruby-value">:unit_of_measure_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:unit_of_measure_id</span>])
  <span class="ruby-comment"># return a json string</span>
  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">custom_deliverable_type</span>.<span class="ruby-identifier">save</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">custom_deliverable_type</span>.<span class="ruby-identifier">name</span>,
                                     <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">custom_deliverable_type</span>.<span class="ruby-identifier">id</span>} }
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Some errors&quot;</span>} }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- create_custom_deliverable_type-source -->
          
        </div>

        

        
      </div><!-- create_custom_deliverable_type-method -->

    
      <div id="method-i-destroy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">destroy</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>DELETE /deliverables/1 DELETE /deliverables/1.xml</p>
          

          
          <div class="method-source-code" id="destroy-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy</span>
  <span class="ruby-ivar">@deliverable</span> = <span class="ruby-constant">Deliverable</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
  
  <span class="ruby-comment"># Save the project so that we can send the user there after deletion</span>
  <span class="ruby-identifier">project_phase</span> = <span class="ruby-ivar">@deliverable</span>.<span class="ruby-identifier">assignable</span>.<span class="ruby-identifier">project_phase</span>
  <span class="ruby-identifier">project</span> = <span class="ruby-identifier">project_phase</span>.<span class="ruby-identifier">project</span>
  
  <span class="ruby-comment"># If there is no effort logged against this deliverable, destroy it</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@deliverable</span>.<span class="ruby-identifier">effort_logs</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
    <span class="ruby-ivar">@deliverable</span>.<span class="ruby-identifier">destroy</span>
    <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span> <span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'projects'</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'show'</span>,
                                <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value">:project_phase_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">project_phase</span>.<span class="ruby-identifier">id</span>}
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">head</span> <span class="ruby-value">:ok</span> }
    <span class="ruby-keyword">end</span>
  
  <span class="ruby-comment"># Otherwise, if there is effort logged against this deliverable,</span>
  <span class="ruby-comment"># show an error message</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-ivar">@deliverable</span>, <span class="ruby-value">:alert</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Sorry, you cannot delete a deliverable if it has effort logged against it.&quot;</span>) }
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">head</span> <span class="ruby-value">:ok</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- destroy-source -->
          
        </div>

        

        
      </div><!-- destroy-method -->

    
      <div id="method-i-edit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">edit</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>GET /deliverables/1/edit</p>
          

          
          <div class="method-source-code" id="edit-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 48</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">edit</span>
  <span class="ruby-ivar">@deliverable</span> = <span class="ruby-constant">Deliverable</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
<span class="ruby-keyword">end</span></pre>
          </div><!-- edit-source -->
          
        </div>

        

        
      </div><!-- edit-method -->

    
      <div id="method-i-get_historical_data" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_historical_data</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Gets the Historical data for the given deliverable type and complexity</p>
          

          
          <div class="method-source-code" id="get_historical_data-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_historical_data</span>
  <span class="ruby-identifier">return_val</span> = []
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:stock_deliverable_type_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:complexity_id</span>]
    <span class="ruby-identifier">del_type_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:stock_deliverable_type_id</span>]
    <span class="ruby-identifier">complexity_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:complexity_id</span>]
    
    <span class="ruby-identifier">stock_deliverable_type</span> = <span class="ruby-constant">StockDeliverableType</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">del_type_id</span>)
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">stock_deliverable_type</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">min_record</span> = <span class="ruby-identifier">stock_deliverable_type</span>.<span class="ruby-identifier">get_del_with_min_effort</span>(<span class="ruby-identifier">complexity_id</span>)
      <span class="ruby-identifier">avg_record</span> = <span class="ruby-identifier">stock_deliverable_type</span>.<span class="ruby-identifier">get_del_with_avg_effort</span>(<span class="ruby-identifier">complexity_id</span>)
      <span class="ruby-identifier">max_record</span> = <span class="ruby-identifier">stock_deliverable_type</span>.<span class="ruby-identifier">get_del_with_max_effort</span>(<span class="ruby-identifier">complexity_id</span>)
      
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">min_record</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">avg_record</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">max_record</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-identifier">return_val</span>[<span class="ruby-value">0</span>] = [<span class="ruby-identifier">min_record</span>.<span class="ruby-identifier">estimated_size</span>, <span class="ruby-identifier">min_record</span>.<span class="ruby-identifier">estimated_production_rate</span>, <span class="ruby-identifier">min_record</span>.<span class="ruby-identifier">estimated_effort</span>]
        <span class="ruby-identifier">return_val</span>[<span class="ruby-value">1</span>] = [<span class="ruby-identifier">avg_record</span>.<span class="ruby-identifier">estimated_size</span>, <span class="ruby-identifier">avg_record</span>.<span class="ruby-identifier">estimated_production_rate</span>, <span class="ruby-identifier">avg_record</span>.<span class="ruby-identifier">estimated_effort</span>]
        <span class="ruby-identifier">return_val</span>[<span class="ruby-value">2</span>] = [<span class="ruby-identifier">max_record</span>.<span class="ruby-identifier">estimated_size</span>, <span class="ruby-identifier">max_record</span>.<span class="ruby-identifier">estimated_production_rate</span>, <span class="ruby-identifier">max_record</span>.<span class="ruby-identifier">estimated_effort</span>]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># return a json string</span>
  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:hist</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">return_val</span>} }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_historical_data-source -->
          
        </div>

        

        
      </div><!-- get_historical_data-method -->

    
      <div id="method-i-get_unit_of_measure" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_unit_of_measure</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Gets the <a href="UnitOfMeasure.html">UnitOfMeasure</a> associated with the
<a href="DeliverableType.html">DeliverableType</a></p>
          

          
          <div class="method-source-code" id="get_unit_of_measure-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 147</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_unit_of_measure</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">:assignable_type</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;StockDeliverableType&quot;</span>
                      <span class="ruby-identifier">stock_deliverable_type</span> = <span class="ruby-constant">StockDeliverableType</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:assignable_id</span>])
    <span class="ruby-identifier">unit_of_measure_name</span> = <span class="ruby-identifier">stock_deliverable_type</span>.<span class="ruby-identifier">deliverable_type</span>.<span class="ruby-identifier">unit_of_measure</span>.<span class="ruby-identifier">unit</span>
   <span class="ruby-keyword">else</span>
                      <span class="ruby-identifier">unit_of_measure_name</span> = <span class="ruby-constant">CustomDeliverableType</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:assignable_id</span>]).<span class="ruby-identifier">unit_of_measure</span>.<span class="ruby-identifier">unit</span>
              <span class="ruby-keyword">end</span>
      
  <span class="ruby-comment"># return a json string</span>
  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">unit_of_measure_name</span>} }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- get_unit_of_measure-source -->
          
        </div>

        

        
      </div><!-- get_unit_of_measure-method -->

    
      <div id="method-i-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>GET /deliverables/new GET /deliverables/new.xml</p>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 35</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@deliverable</span> = <span class="ruby-constant">Deliverable</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@project_phase_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:project_phase_id</span>]

  <span class="ruby-identifier">gather_collections</span>

  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment"># new.html.erb</span>
    <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@deliverable</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
      <div id="method-i-show" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">show</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>GET /deliverables/1 GET /deliverables/1.xml</p>
          

          
          <div class="method-source-code" id="show-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">show</span>
  <span class="ruby-ivar">@deliverable</span> = <span class="ruby-constant">Deliverable</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])
  
  <span class="ruby-ivar">@effort_logs</span> = <span class="ruby-ivar">@deliverable</span>.<span class="ruby-identifier">effort_logs</span>
  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment"># show.html.erb</span>
    <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@deliverable</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- show-source -->
          
        </div>

        

        
      </div><!-- show-method -->

    
      <div id="method-i-show_phase_deliverables" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">show_phase_deliverables</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>GET /deliverables/show_phase_deliverables Action to respond to ajax call to
get the deliverables for the selected phase</p>
          

          
          <div class="method-source-code" id="show_phase_deliverables-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 25</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">show_phase_deliverables</span>
  <span class="ruby-ivar">@deliverable</span> = <span class="ruby-constant">Deliverable</span>.<span class="ruby-identifier">all</span>

  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:json</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@deliverable</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- show_phase_deliverables-source -->
          
        </div>

        

        
      </div><!-- show_phase_deliverables-method -->

    
      <div id="method-i-update" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">update</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>PUT /deliverables/1 PUT /deliverables/1.xml</p>
          

          
          <div class="method-source-code" id="update-source">
            <pre><span class="ruby-comment"># File app/controllers/deliverables_controller.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update</span>
  <span class="ruby-ivar">@deliverable</span> = <span class="ruby-constant">Deliverable</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:id</span>])

  <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@deliverable</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-value">:deliverable</span>])
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">redirect_to</span>(<span class="ruby-ivar">@deliverable</span>, <span class="ruby-value">:notice</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'Deliverable was successfully updated.'</span>) }
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">head</span> <span class="ruby-value">:ok</span> }
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;edit&quot;</span> }
      <span class="ruby-identifier">format</span>.<span class="ruby-identifier">xml</span> { <span class="ruby-identifier">render</span> <span class="ruby-value">:xml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@deliverable</span>.<span class="ruby-identifier">errors</span>, <span class="ruby-value">:status</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:unprocessable_entity</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- update-source -->
          
        </div>

        

        
      </div><!-- update-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

